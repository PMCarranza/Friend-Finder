<!doctype html>
<html lang="en">
<head>
<title>Survey</title>
<!-- Required meta tags -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<!-- Bootstrap CSS -->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
<link rel="stylesheet" href="css/reset.css">
<link rel="stylesheet" href="css/survey.css">
</head>
<body>
<h1>Survey Questions</h1>

    <!-- Questions start here -->

    <form>
        <div class="form-group">
            <label for="user-name"><h2>About You</h2></label><br>
            <label for="user-name"><h6>Name</h6></label>
            <input type="text" class="form-control" id="user-name" placeholder="Perseus">
            <label for="user-name"><h6>Link to photo image</h6></label>
            <input type="text" class="form-control" id="user-photo" placeholder="preferably your face will be visible">
        </div>
        <p>Please provide your answers on a scale of One to Five, One being the one you strongly disagree and 5 you strongly agree</p>
        <div class="form-group">
            <label for="question-answer"><h3>Question #1</h3></label>
            <h5> How much do you need to be in control?</h5>
            <select class="form-control" id="answer1">
            <option>Select Option</option>
            <option>1</option>
            <option>2</option>
            <option>3</option>
            <option>4</option>
            <option>5</option>
            </select>

            <label for="question-answer"><h3>Question #2</h3></label>
            <h5>How important is your physical appearance to you?</h5>
            <select class="form-control" id="answer2">
            <option>Select Option</option>
            <option>1</option>
            <option>2</option>
            <option>3</option>
            <option>4</option>
            <option>5</option>
            </select>

            <label for="question-answer"><h3>Question #3</h3></label>
            <h5>How are your communication skills?</h5>
            <select class="form-control" id="answer3">
            <option>Select Option</option>
            <option>1</option>
            <option>2</option>
            <option>3</option>
            <option>4</option>
            <option>5</option>
            </select>

            <label for="question-answer"><h3>Question #4</h3></label>
            <h5>are you a homebody?</h5>
            <select class="form-control" id="answer4">
            <option>Select Option</option>
            <option>1</option>
            <option>2</option>
            <option>3</option>
            <option>4</option>
            <option>5</option>
            </select>

            <label for="question-answer"><h3>Question #5</h3></label>
            <h5>Are you afraid of conflict?</h5>
            <select class="form-control" id="answer5">
            <option>Select Option</option>
            <option>1</option>
            <option>2</option>
            <option>3</option>
            <option>4</option>
            <option>5</option>
            </select>

            <label for="question-answer"><h3>Question #6</h3></label>
            <h5>Do you enjoy warm weather?</h5>
            <select class="form-control" id="answer6">
            <option>Select Option</option>
            <option>1</option>
            <option>2</option>
            <option>3</option>
            <option>4</option>
            <option>5</option>
            </select>

            <label for="question-answer"><h3>Question #7</h3></label>
            <h5>Do you get seasick?</h5>
            <select class="form-control" id="answer7">
            <option>Select Option</option>
            <option>1</option>
            <option>2</option>
            <option>3</option>
            <option>4</option>
            <option>5</option>
            </select>

            <label for="question-answer"><h3>Question #8</h3></label>
            <h5>Are you outdoorsy?</h5>
            <select class="form-control" id="answer8">
            <option>Select Option</option>
            <option>1</option>
            <option>2</option>
            <option>3</option>
            <option>4</option>
            <option>5</option>
            </select>

            <label for="question-answer"><h3>Question #9</h3></label>
            <h5>are you the jealous type?</h5>
            <select class="form-control" id="answer9">
            <option>Select Option</option>    
            <option>1</option>
            <option>2</option>
            <option>3</option>
            <option>4</option>
            <option>5</option>
            </select>

            <label for="question-answer"><h3>Question #10</h3></label>
            <h5>are you a planner?</h5>
            <select class="form-control" id="answer10">
            <option>Select Option</option>         
            <option>1</option>
            <option>2</option>
            <option>3</option>
            <option>4</option>
            <option>5</option>
            </select>
        </div>

        <button type="submit" class="btn btn-primary submit">Submit</button>

    </form>
    
<!-- Optional JavaScript -->
<!-- jQuery first, then Popper.js, then Bootstrap JS -->

<footer class="footer">
    <div class="container">
        <a href="/home">HOME</a>
    </div>
</footer>
<script src="https://code.jquery.com/jquery.js"></script>
<!-- <script src= "https://code.jquery.com/jquery-3.1.1.min.js"></script> -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>


<!-- BELOW CODE IS CRITICAL. IT HANDLES HOW FORM DATA IS SENT TO OUR SERVER -->
<!-- on submit jQuery will capture the user's answers and make a POST request to the api -->
<!-- I think the route is /api/apiRoutes, this will make the code found in that file run -->

<!-- $post is where the magic happens, similar to the ajax call used in the past, the object to be sent is passed and a callback is made -->
<script type="text/javascript">

    $(".submit").on("click", function(event) {
        event.preventDefault();

        var participant={
            userName: $('#user-name').val(),
            userPhoto: $('#user-photo').val(),
            answers:[
            $('#answer1').val(),
            $('#answer2').val(),
            $('#answer3').val(),
            $('#answer4').val(),
            $('#answer5').val(),
            $('#answer6').val(),
            $('#answer7').val(),
            $('#answer8').val(),
            $('#answer9').val(),
            $('#answer10').val()
            ]
        };
        console.log('survey participant from survey.html');
        console.table(participant);

    //     $.ajax({
    //         url: '/api/friends',
    //         type:'POST', 
    //         // data: JSON.stringify(participant)
    //         data: participant
    //     }).then(function(data){
    //         if (data){
    //             alert('We are looking for a match!');
    //         }else{
    //             alert('Hmm . . . Tricky customer!');
    //         };
    //         $('#user-name').val('');
    //         $('#user-photo').val('');
    //         $('#answer1').val('');
    //         $('#answer2').val('');
    //         $('#answer3').val('');
    //         $('#answer4').val('');
    //         $('#answer5').val('');
    //         $('#answer6').val('');
    //         $('#answer7').val('');
    //         $('#answer8').val('');
    //         $('#answer9').val('');
    //         $('#answer10').val('');
    //     });

    $.post('api/friends', participant, function(data){

        if (data){
            alert('Bravo!');
        }else{
            alert('Boooooo');
        }
        $('#user-name').val('');
            $('#user-photo').val('');
            $('#answer1').val('');
            $('#answer2').val('');
            $('#answer3').val('');
            $('#answer4').val('');
            $('#answer5').val('');
            $('#answer6').val('');
            $('#answer7').val('');
            $('#answer8').val('');
            $('#answer9').val('');
            $('#answer10').val('');
    })
});

</script>

</body>
</html>

